import{u as e,j as s}from"./index-CtpXv13h.js";import{r}from"./vendor-DD48japz.js";import{c as a,a as t,q as o,l as n}from"./queryKeys-BO06q7OX.js";import{b as l,u as i}from"./query-CrCWkRvr.js";import{X as m,h as d,o as x,n as c,i as u}from"./ui-Cxf6t73r.js";import"./router-DWVnhlTE.js";import"./utils-A1DBBW5O.js";const p=a(async e=>{const{data:s}=await t.post("/quotes",e);return s}),h=({isOpen:a,onClose:t,productId:h})=>{const{t:f,isRTL:b,language:v}=e(),[g,y]=r.useState({name:"",email:"",phone:"",company:"",products:h?[{id:h}]:[],message:""}),[j,w]=r.useState(null);r.useEffect(()=>{h&&y(e=>({...e,products:[{id:h}]}))},[h]);const{mutate:N,isLoading:q,isSuccess:k,reset:C}=l({mutationFn:p,onSuccess:()=>{w(null),y({name:"",email:"",phone:"",company:"",products:h?[{id:h}]:[],message:""})},onError:e=>{w(e.message||f("quote.error.submitFailed"))}}),E=e=>{const{name:s,value:r}=e.target;y(e=>({...e,[s]:r})),j&&w(null)},{data:S,isLoading:F,isError:L}=i({queryKey:[o.listProducts,{page:1,per_page:100,category_id:2},v],queryFn:()=>n({page:1,per_page:100,category_id:2}),enabled:!!v,staleTime:3e5,cacheTime:6e5});return a?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",children:s.jsx("div",{className:"bg-white/95 backdrop-blur-md border border-inovara-primary/20 rounded-2xl sm:rounded-3xl max-w-xs sm:max-w-md md:max-w-2xl lg:max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto shadow-2xl",children:s.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6 sm:mb-8 "+(b?"flex-row-reverse":"flex-row"),children:[s.jsx("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 "+(b?"flex-row-reverse":"flex-row"),children:s.jsxs("div",{className:"flex-1 "+(b?"text-right":"text-left"),children:[s.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-black text-inovara-primary mb-1 leading-tight",children:f("quote.title")}),s.jsx("p",{className:"text-inovara-primary/70 text-xs sm:text-sm font-medium leading-relaxed",children:f("quote.subtitle")})]})}),s.jsx("button",{onClick:t,className:"p-2 sm:p-3 text-inovara-primary/60 hover:text-inovara-primary hover:bg-inovara-primary/10 rounded-xl transition-all duration-300 group flex-shrink-0 "+(b?"mr-2":"ml-2"),"aria-label":"Close modal",children:s.jsx(m,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-90 transition-transform duration-300"})})]}),j&&s.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-xl sm:rounded-2xl flex items-start gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[s.jsx(d,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-700 text-xs sm:text-sm font-medium leading-relaxed",children:j})]}),k?s.jsxs("div",{className:"text-center py-8 sm:py-12 "+(b?"rtl":"ltr"),children:[s.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 sm:mb-8 shadow-2xl",children:s.jsx(u,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-white"})}),s.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-black text-inovara-primary mb-3 sm:mb-4 leading-tight",children:f("quote.success.title")}),s.jsx("p",{className:"text-inovara-primary/70 text-sm sm:text-base md:text-lg font-medium mb-6 sm:mb-8 max-w-md mx-auto leading-relaxed",children:f("quote.success.message")}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center "+(b?"sm:flex-row-reverse":""),children:[s.jsx("button",{onClick:()=>{y({name:"",email:"",phone:"",company:"",products:h?[{id:h}]:[],message:""}),w(null),C()},className:"group px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-inovara-primary to-inovara-secondary text-white font-bold rounded-xl sm:rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-inovara-accent/30",children:s.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[s.jsx("span",{className:"text-sm sm:text-base",children:f("quote.success.requestAnother")}),s.jsx(c,{className:"w-4 h-4 sm:w-6 sm:h-6 roup-hover/btn:translate-x-1 transition-transform duration-300 "+(b?"rotate-360 group-hover:-translate-x-1":"")})]})}),s.jsx("button",{onClick:t,className:"px-6 sm:px-8 py-3 sm:py-4 border-2 border-inovara-primary text-inovara-primary font-bold rounded-xl sm:rounded-2xl hover:bg-inovara-primary hover:text-white transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-inovara-primary/20",children:s.jsx("span",{className:"text-sm sm:text-base",children:f("quote.success.close")})})]})]}):s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!g.name||!g.email||!g.company||!h&&0===g.products.length)return void w(f("quote.validation.requiredFields"));/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)?N(g):w(f("quote.validation.invalidEmail"))},className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs("div",{className:b?"sm:order-2":"sm:order-1",children:[s.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.name")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",value:g.name,onChange:E,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.name"),required:!0})]}),s.jsxs("div",{className:b?"sm:order-1":"sm:order-2",children:[s.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.email")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"email",value:g.email,onChange:E,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.email"),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[s.jsxs("div",{className:b?"sm:order-2":"sm:order-1",children:[s.jsx("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:f("quote.phone")}),s.jsx("input",{type:"tel",name:"phone",value:g.phone,onChange:E,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.phone")})]}),s.jsxs("div",{className:b?"sm:order-1":"sm:order-2",children:[s.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.company")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"company",value:g.company,onChange:E,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.company"),required:!0})]})]}),!h&&s.jsx("div",{children:s.jsxs("div",{className:b?"sm:order-2":"sm:order-1",children:[s.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.product")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"products",value:g.products[0]?.id||"",onChange:e=>{const s=parseInt(e.target.value);y(s?e=>({...e,products:[{id:s}]}):e=>({...e,products:h?[{id:h}]:[]})),j&&w(null)},dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),required:!0,disabled:F,children:[s.jsx("option",{value:"",className:"text-inovara-primary/50",children:f(F?"common.loading":"quote.selectProduct")}),S?.data?.map(e=>s.jsx("option",{value:e.id,className:"text-inovara-primary",children:e.name},e.id))]}),L&&s.jsx("p",{className:"text-red-500 text-xs mt-1",children:f("quote.productLoadError")})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:f("quote.requirements")}),s.jsx("textarea",{name:"message",value:g.message,onChange:E,dir:b?"rtl":"ltr",rows:3,className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 resize-none text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.requirementsPlaceholder")})]}),s.jsxs("button",{type:"submit",disabled:q,className:"w-full group/btn relative overflow-hidden bg-gradient-to-r from-inovara-primary to-inovara-secondary text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl sm:rounded-2xl shadow-xl sm:shadow-2xl hover:shadow-2xl sm:hover:shadow-3xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none focus:outline-none focus:ring-4 focus:ring-inovara-accent/30",children:[q?s.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[s.jsx(x,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}),s.jsxs("span",{className:"text-sm sm:text-base",children:[f("common.loading"),"..."]})]}):s.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[s.jsx("span",{className:"text-sm sm:text-base",children:f("quote.submit")}),s.jsx(c,{className:"w-4 h-4 sm:w-6 sm:h-6 roup-hover/btn:translate-x-1 transition-transform duration-300 "+(b?"rotate-360 group-hover:-translate-x-1":"")})]}),s.jsx("div",{className:"absolute inset-0 bg-white/10 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-500 skew-x-12"})]})]})]})})}):null};export{h as default};
