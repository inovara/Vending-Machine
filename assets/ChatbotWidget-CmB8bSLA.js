import{u as N,j as e}from"./index-wsrQuEBr.js";import{r as i}from"./vendor-Bm7FCeSL.js";import{B as h,X as k,U as $,m as q,l as Q}from"./ui-GixEo8iP.js";import"./router-Dh4FWyMm.js";const D=({isOpen:l,onClose:m})=>{const{t:a,isRTL:s}=N(),[o,f]=i.useState([{id:"1",text:a("chatbot.welcome"),sender:"bot",timestamp:new Date}]),[n,c]=i.useState(""),[d,p]=i.useState(!1),g=i.useRef(null),x=i.useRef(null);i.useEffect(()=>{var t;(t=g.current)==null||t.scrollIntoView({behavior:"smooth"})},[o]),i.useEffect(()=>{l&&x.current&&x.current.focus()},[l]);const b=t=>{const r=t.toLowerCase();return r.includes("price")||r.includes("cost")?a("chatbot.responses.pricing"):r.includes("product")||r.includes("machine")?a("chatbot.responses.products"):r.includes("contact")||r.includes("phone")||r.includes("email")?a("chatbot.responses.contact"):r.includes("quote")||r.includes("request")?a("chatbot.responses.quote"):r.includes("hello")||r.includes("hi")||r.includes("hey")?a("chatbot.responses.greeting"):a("chatbot.responses.default")},u=async()=>{if(!n.trim())return;const t={id:Date.now().toString(),text:n.trim(),sender:"user",timestamp:new Date};f(r=>[...r,t]),c(""),p(!0),setTimeout(()=>{const r={id:(Date.now()+1).toString(),text:b(t.text),sender:"bot",timestamp:new Date};f(y=>[...y,r]),p(!1)},1e3+Math.random()*1e3)},w=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),u())},j=[a("chatbot.quickQuestions.pricing"),a("chatbot.quickQuestions.products"),a("chatbot.quickQuestions.contact"),a("chatbot.quickQuestions.quote")],v=t=>{c(t),setTimeout(()=>u(),100)};return l?e.jsxs("div",{className:`fixed inset-0 z-50 flex items-end p-4 ${s?"justify-start":"justify-end"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:m}),e.jsxs("div",{className:`
        relative w-full max-w-md h-[600px] bg-white rounded-2xl shadow-2xl
        flex flex-col overflow-hidden transform transition-all duration-300
        ${s?"rtl":"ltr"}
      `,children:[e.jsxs("div",{className:`bg-gradient-to-r from-inovara-primary to-inovara-secondary p-4 flex items-center ${s?"flex-row-reverse":"flex-row"} justify-between border-b border-white/10`,children:[e.jsxs("div",{className:`flex items-center gap-3 ${s?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(h,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:s?"text-right":"text-left",children:[e.jsx("h3",{className:"text-white font-black text-xl leading-tight",children:a("chatbot.title")}),e.jsx("p",{className:"text-white/90 text-sm font-medium mt-1",children:a("chatbot.subtitle")})]})]}),e.jsx("button",{onClick:m,className:`p-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group ${s?"mr-2":"ml-2"}`,"aria-label":a("common.close"),children:e.jsx(k,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(t=>e.jsx("div",{className:`flex ${t.sender==="user"?s?"justify-start":"justify-end":s?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`
                flex items-start gap-3 max-w-[80%]
                ${t.sender==="user",s?"flex-row-reverse":"flex-row"}
              `,children:[e.jsx("div",{className:`
                  w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                  ${t.sender==="user"?"bg-inovara-primary text-white":"bg-gray-100 text-gray-600"}
                `,children:t.sender==="user"?e.jsx($,{className:"w-4 h-4"}):e.jsx(h,{className:"w-4 h-4"})}),e.jsxs("div",{className:`
                  px-4 py-3 rounded-2xl text-sm
                  ${t.sender==="user"?"bg-inovara-primary text-white":"bg-gray-100 text-gray-800"}
                `,children:[e.jsx("p",{className:s?"text-right":"text-left",children:t.text}),e.jsx("p",{className:`
                    text-xs mt-1 opacity-70
                    ${s?"text-right":"text-left"}
                  `,children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},t.id)),d&&e.jsx("div",{className:`flex ${s?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start gap-3 ${s?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center flex-shrink-0",children:e.jsx(h,{className:"w-4 h-4"})}),e.jsx("div",{className:"bg-gray-100 text-gray-800 px-4 py-3 rounded-2xl",children:e.jsxs("div",{className:`flex items-center gap-1 ${s?"flex-row-reverse":"flex-row"}`,children:[e.jsx(q,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:`text-sm ${s?"text-right":"text-left"}`,children:a("chatbot.typing")})]})})]})}),e.jsx("div",{ref:g})]}),o.length===1&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsx("p",{className:`text-sm text-gray-600 mb-3 font-medium ${s?"text-right":"text-left"}`,children:a("chatbot.quickQuestions.title")}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:j.map((t,r)=>e.jsx("button",{onClick:()=>v(t),className:`text-xs p-2 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors duration-200 ${s?"text-right":"text-left"}`,children:t},r))})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:`flex items-center gap-3 ${s?"flex-row-reverse":"flex-row"}`,children:[e.jsx("input",{ref:x,type:"text",value:n,onChange:t=>c(t.target.value),onKeyPress:w,placeholder:a("chatbot.inputPlaceholder"),className:`
                flex-1 px-4 py-3 border border-gray-300 rounded-xl
                focus:outline-none focus:ring-2 focus:ring-inovara-accent/20 focus:border-inovara-accent
                text-sm placeholder-gray-500
                ${s?"text-right":"text-left"}
              `,disabled:d}),e.jsx("button",{onClick:u,disabled:!n.trim()||d,className:"p-3 bg-gradient-to-r from-inovara-primary to-inovara-secondary text-white rounded-xl hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Q,{className:"w-4 h-4"})})]})})]})]}):null};export{D as default};
