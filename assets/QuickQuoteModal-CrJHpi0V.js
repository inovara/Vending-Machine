import{u as e,j as r}from"./index-Dt3OUNLT.js";import{r as s}from"./vendor-DD48japz.js";import{c as a,a as t,q as o,l as n}from"./queryKeys-BO06q7OX.js";import{b as l,u as i}from"./query-CrCWkRvr.js";import{X as m,h as d,o as x,n as c,i as u}from"./ui-DdgLP26B.js";import"./router-DWVnhlTE.js";import"./utils-A1DBBW5O.js";const p=a(async e=>{const{data:r}=await t.post("/quotes",e);return r}),h=({isOpen:a,onClose:t,productId:h})=>{const{t:f,isRTL:b,language:g}=e(),[v,y]=s.useState({name:"",email:"",phone:"",company:"",products:h?[{id:h}]:[],message:""}),[j,w]=s.useState(null),{mutate:N,isLoading:q,isSuccess:k}=l({mutationFn:p,onSuccess:()=>{w(null),y({name:"",email:"",phone:"",company:"",products:h?[{id:h}]:[],message:""})},onError:e=>{w(e.message||"Failed to submit quote. Please try again.")}}),C=e=>{const{name:r,value:s}=e.target;y(e=>({...e,[r]:s})),j&&w(null)},{data:P,isLoading:S,isError:L}=i({queryKey:[o.listProducts,{page:1,per_page:100,category_id:2},g],queryFn:()=>n({page:1,per_page:100,category_id:2}),enabled:!!g,staleTime:3e5,cacheTime:6e5});return a?r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",children:r.jsx("div",{className:"bg-white/95 backdrop-blur-md border border-inovara-primary/20 rounded-2xl sm:rounded-3xl max-w-xs sm:max-w-md md:max-w-2xl lg:max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-y-auto shadow-2xl",children:r.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6 sm:mb-8 "+(b?"flex-row-reverse":"flex-row"),children:[r.jsx("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 "+(b?"flex-row-reverse":"flex-row"),children:r.jsxs("div",{className:"flex-1 "+(b?"text-right":"text-left"),children:[r.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-black text-inovara-primary mb-1 leading-tight",children:f("quote.title")}),r.jsx("p",{className:"text-inovara-primary/70 text-xs sm:text-sm font-medium leading-relaxed",children:f("quote.subtitle")})]})}),r.jsx("button",{onClick:t,className:"p-2 sm:p-3 text-inovara-primary/60 hover:text-inovara-primary hover:bg-inovara-primary/10 rounded-xl transition-all duration-300 group flex-shrink-0 "+(b?"mr-2":"ml-2"),"aria-label":"Close modal",children:r.jsx(m,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:rotate-90 transition-transform duration-300"})})]}),j&&r.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-xl sm:rounded-2xl flex items-start gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[r.jsx(d,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-red-700 text-xs sm:text-sm font-medium leading-relaxed",children:j})]}),k?r.jsxs("div",{className:"text-center py-8 sm:py-12 "+(b?"rtl":"ltr"),children:[r.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 sm:mb-8 shadow-2xl",children:r.jsx(u,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-white"})}),r.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-black text-inovara-primary mb-3 sm:mb-4 leading-tight",children:"Quote Request Sent!"}),r.jsx("p",{className:"text-inovara-primary/70 text-sm sm:text-base md:text-lg font-medium mb-6 sm:mb-8 max-w-md mx-auto leading-relaxed",children:"Thank you for your interest! We'll send you a detailed quote within 24 hours."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center "+(b?"sm:flex-row-reverse":""),children:[r.jsx("button",{onClick:()=>{y({name:"",email:"",phone:"",company:"",products:h?[{id:h}]:[],message:""}),w(null)},className:"group px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-inovara-primary to-inovara-secondary text-white font-bold rounded-xl sm:rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-inovara-accent/30",children:r.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[r.jsx(c,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:translate-x-1 transition-transform duration-300"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Request Another Quote"})]})}),r.jsx("button",{onClick:t,className:"px-6 sm:px-8 py-3 sm:py-4 border-2 border-inovara-primary text-inovara-primary font-bold rounded-xl sm:rounded-2xl hover:bg-inovara-primary hover:text-white transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-inovara-primary/20",children:r.jsx("span",{className:"text-sm sm:text-base",children:"Close"})})]})]}):r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!v.name||!v.email||!v.company||!h&&0===v.products.length)return void w("Please fill in all required fields.");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.email)?N(v):w("Please enter a valid email address.")},className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:b?"sm:order-2":"sm:order-1",children:[r.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.name")," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"name",value:v.name,onChange:C,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.name"),required:!0})]}),r.jsxs("div",{className:b?"sm:order-1":"sm:order-2",children:[r.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.email")," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",name:"email",value:v.email,onChange:C,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.email"),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{className:b?"sm:order-2":"sm:order-1",children:[r.jsx("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:f("quote.phone")}),r.jsx("input",{type:"tel",name:"phone",value:v.phone,onChange:C,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.phone")})]}),r.jsxs("div",{className:b?"sm:order-1":"sm:order-2",children:[r.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.company")," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"company",value:v.company,onChange:C,dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.company"),required:!0})]})]}),!h&&r.jsx("div",{children:r.jsxs("div",{className:b?"sm:order-2":"sm:order-1",children:[r.jsxs("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:[f("quote.product")," ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{name:"products",value:v.products[0]?.id||"",onChange:e=>{const r=parseInt(e.target.value);y(r?e=>({...e,products:[{id:r}]}):e=>({...e,products:[]})),j&&w(null)},dir:b?"rtl":"ltr",className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 text-sm sm:text-base "+(b?"text-right":"text-left"),required:!0,disabled:S,children:[r.jsx("option",{value:"",className:"text-inovara-primary/50",children:f(S?"common.loading":"quote.selectProduct")}),P?.data?.map(e=>r.jsx("option",{value:e.id,className:"text-inovara-primary",children:e.name},e.id))]}),L&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:f("quote.productLoadError")})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-inovara-primary font-bold text-xs sm:text-sm mb-2 sm:mb-3 "+(b?"text-right":"text-left"),children:f("quote.requirements")}),r.jsx("textarea",{name:"message",value:v.message,onChange:C,dir:b?"rtl":"ltr",rows:3,className:"w-full px-3 sm:px-4 py-3 sm:py-4 bg-white border-2 border-inovara-primary/20 rounded-xl sm:rounded-2xl text-inovara-primary placeholder-inovara-primary/50 focus:border-inovara-accent focus:ring-4 focus:ring-inovara-accent/20 focus:outline-none transition-all duration-300 resize-none text-sm sm:text-base "+(b?"text-right":"text-left"),placeholder:f("quote.requirementsPlaceholder")})]}),r.jsxs("button",{type:"submit",disabled:q,className:"w-full group/btn relative overflow-hidden bg-gradient-to-r from-inovara-primary to-inovara-secondary text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl sm:rounded-2xl shadow-xl sm:shadow-2xl hover:shadow-2xl sm:hover:shadow-3xl transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none focus:outline-none focus:ring-4 focus:ring-inovara-accent/30",children:[q?r.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[r.jsx(x,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}),r.jsxs("span",{className:"text-sm sm:text-base",children:[f("common.loading"),"..."]})]}):r.jsxs("span",{className:"flex items-center justify-center gap-2 sm:gap-3 "+(b?"flex-row-reverse":"flex-row"),children:[r.jsx(c,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover/btn:translate-x-1 transition-transform duration-300"}),r.jsx("span",{className:"text-sm sm:text-base",children:f("quote.submit")})]}),r.jsx("div",{className:"absolute inset-0 bg-white/10 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-500 skew-x-12"})]})]})]})})}):null};export{h as default};
