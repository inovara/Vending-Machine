import{u as e,j as t}from"./index-CXnjyr9g.js";import{r as s}from"./vendor-DD48japz.js";import{B as a,X as r,p as o,o as i,n,b as c,a as l,E as d,q as m}from"./ui-DdgLP26B.js";import"./router-DWVnhlTE.js";import"./query-CrCWkRvr.js";const x=({isOpen:x,onClose:u,onQuoteRequest:p})=>{const{t:h,isRTL:g,language:b}=e(),[f,w]=s.useState([]),[y,v]=s.useState(""),[j,N]=s.useState(!1),[k,q]=s.useState([]),[C,S]=s.useState({}),Q=s.useRef(null),D=s.useRef(null);s.useEffect(()=>{Q.current?.scrollIntoView({behavior:"smooth"})},[f]),s.useEffect(()=>{const e={id:"welcome",text:h("chatbot.welcome"),sender:"bot",timestamp:new Date};w([e])},[b,h]),s.useEffect(()=>{x&&D.current&&D.current.focus()},[x]),s.useEffect(()=>{const e=e=>{"Escape"===e.key&&x&&u()};if(x)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[x,u]);const $=s.useCallback(e=>{const t=e.toLowerCase(),s=k.join(" ").toLowerCase();q(t=>[...t.slice(-4),e.toLowerCase()]);const a={greeting:["hello","hi","hey","good morning","good afternoon","good evening","salam","مرحبا","أهلا"],pricing:["price","cost","expensive","cheap","budget","affordable","سعر","تكلفة","مكلف"],products:["product","machine","vending","snack","beverage","food","equipment","منتج","ماكينة","بيع"],features:["feature","capability","function","technology","smart","cashless","analytics","ميزة","تقنية"],contact:["contact","phone","email","address","location","office","تواصل","هاتف","عنوان"],quote:["quote","estimate","proposal","request","inquiry","عرض سعر","تقدير","طلب"],support:["help","support","issue","problem","bug","error","مساعدة","دعم","مشكلة"],company:["company","about","history","team","mission","شركة","عن","فريق"],industries:["industry","sector","business","office","hospital","school","retail","قطاع","صناعة"],installation:["install","setup","delivery","shipping","installation","تركيب","توصيل"],maintenance:["maintenance","service","repair","support","warranty","صيانة","خدمة","إصلاح"],payment:["payment","cash","card","digital","online","دفع","نقدي","إلكتروني"],analytics:["analytics","data","report","statistics","tracking","تحليلات","بيانات","تقارير"]};var r;r=t,["budget","affordable","expensive","cheap","ميزانية","رخيص","غالي"].some(e=>r.includes(e))&&S(e=>({...e,budget:r})),["office","hospital","school","retail","restaurant","مكتب","مستشفى","مدرسة"].some(e=>r.includes(e))&&S(e=>({...e,industry:r}));let o="default",i=0;for(const[n,c]of Object.entries(a)){const e=c.filter(e=>t.includes(e)||s.includes(e)).length;e>i&&(i=e,o=n)}return(e=>{const t=new Date;switch(e){case"greeting":return{id:Date.now().toString(),text:h("chatbot.responses.greeting"),sender:"bot",timestamp:t,type:"suggestion",suggestions:[h("chatbot.quickQuestions.pricing"),h("chatbot.quickQuestions.products"),h("chatbot.quickQuestions.quote")]};case"pricing":return{id:Date.now().toString(),text:C.budget?h("chatbot.responses.pricingPersonalized"):h("chatbot.responses.pricing"),sender:"bot",timestamp:t,type:"action",actions:[{id:"get-quote",label:h("chatbot.actions.getQuote"),action:()=>{p&&(p(),u())},icon:c,type:"primary"},{id:"view-products",label:h("chatbot.actions.viewProducts"),action:()=>{window.location.href="/products"},icon:m,type:"secondary"}]};case"products":return{id:Date.now().toString(),text:h("chatbot.responses.products"),sender:"bot",timestamp:t,type:"suggestion",suggestions:[h("chatbot.suggestions.snackMachines"),h("chatbot.suggestions.beverageMachines"),h("chatbot.suggestions.foodMachines"),h("chatbot.suggestions.customSolutions")]};case"contact":return{id:Date.now().toString(),text:h("chatbot.responses.contact"),sender:"bot",timestamp:t,type:"action",actions:[{id:"whatsapp",label:h("chatbot.actions.whatsapp"),action:()=>{window.open("https://wa.me/201234567890","_blank")},icon:l,type:"primary"},{id:"email",label:h("chatbot.actions.email"),action:()=>{window.location.href="mailto:info@inovara.com"},icon:d,type:"secondary"}]};case"quote":return{id:Date.now().toString(),text:h("chatbot.responses.quote"),sender:"bot",timestamp:t,type:"action",actions:[{id:"request-quote",label:h("chatbot.actions.requestQuote"),action:()=>{p&&(p(),u())},icon:c,type:"primary"}]};case"features":return{id:Date.now().toString(),text:h("chatbot.responses.features"),sender:"bot",timestamp:t,type:"suggestion",suggestions:[h("chatbot.suggestions.cashlessPayments"),h("chatbot.suggestions.realTimeAnalytics"),h("chatbot.suggestions.remoteManagement"),h("chatbot.suggestions.customBranding")]};case"industries":return{id:Date.now().toString(),text:h("chatbot.responses.industries"),sender:"bot",timestamp:t,type:"suggestion",suggestions:[h("chatbot.suggestions.offices"),h("chatbot.suggestions.hospitals"),h("chatbot.suggestions.schools"),h("chatbot.suggestions.retail")]};default:return{id:Date.now().toString(),text:h("chatbot.responses.default"),sender:"bot",timestamp:t,type:"suggestion",suggestions:[h("chatbot.quickQuestions.pricing"),h("chatbot.quickQuestions.products"),h("chatbot.quickQuestions.contact"),h("chatbot.quickQuestions.quote")]}}})(o)},[k,C,h,p,u]),E=async()=>{if(!y.trim())return;const e={id:Date.now().toString(),text:y.trim(),sender:"user",timestamp:new Date,type:"text"};w(t=>[...t,e]),v(""),N(!0);const t=800+1200*Math.random();setTimeout(()=>{const t=$(e.text);w(e=>[...e,t]),N(!1)},t)},L=[h("chatbot.quickQuestions.pricing"),h("chatbot.quickQuestions.products"),h("chatbot.quickQuestions.contact"),h("chatbot.quickQuestions.quote")];return x?t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end p-1 xs:p-2 sm:p-4 "+(g?"justify-start":"justify-end"),role:"dialog","aria-modal":"true","aria-labelledby":"chatbot-title","aria-describedby":"chatbot-subtitle",children:[t.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300",onClick:u,"aria-label":h("common.close")}),t.jsxs("div",{className:`\n        relative ax-w-xs sm:max-w-md md:max-w-md lg:max-w-md w-full\n        h-[90vh] xs:h-[85vh] sm:h-[600px] max-h-[700px] min-h-[350px] xs:min-h-[400px]\n        bg-white/95 backdrop-blur-md rounded-lg xs:rounded-xl sm:rounded-2xl shadow-2xl\n        flex flex-col overflow-hidden transform transition-all duration-300 ease-out\n        border border-inovara-primary/20\n        ${g?"rtl":"ltr"}\n        animate-in slide-in-from-bottom-4 fade-in duration-300\n        focus-within:ring-2 focus-within:ring-inovara-primary/20\n        mx-auto sm:mx-0\n      `,children:[t.jsxs("div",{className:`bg-gradient-to-r from-inovara-primary to-inovara-secondary p-2.5 xs:p-3 sm:p-4 flex items-center ${g?"flex-row-reverse":"flex-row"} justify-between border-b border-white/10 shrink-0`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 xs:gap-2 sm:gap-3 min-w-0 flex-1 "+(g?"flex-row-reverse":"flex-row"),children:[t.jsx("div",{className:"w-8 h-8 xs:w-10 xs:h-10 sm:w-12 sm:h-12 bg-white/20 backdrop-blur-sm rounded-lg xs:rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg shrink-0",children:t.jsx(a,{className:"w-4 h-4 xs:w-5 xs:h-5 sm:w-7 sm:h-7 text-white"})}),t.jsxs("div",{className:"min-w-0 flex-1 "+(g?"text-right":"text-left"),children:[t.jsx("h3",{id:"chatbot-title",className:"text-white font-black text-base xs:text-lg sm:text-xl leading-tight truncate",children:h("chatbot.title")}),t.jsx("p",{id:"chatbot-subtitle",className:"text-white/90 text-xs xs:text-xs sm:text-sm font-medium mt-0.5 xs:mt-0.5 sm:mt-1 truncate",children:h("chatbot.subtitle")})]})]}),t.jsx("button",{onClick:u,className:"p-1.5 xs:p-2 sm:p-3 text-white/80 hover:text-white hover:bg-white/10 rounded-md xs:rounded-lg sm:rounded-xl transition-all duration-300 group shrink-0 touch-manipulation focus:outline-none focus:ring-2 focus:ring-white/30 min-w-[44px] min-h-[44px] xs:min-w-[48px] xs:min-h-[48px] flex items-center justify-center "+(g?"mr-0.5 xs:mr-1 sm:mr-2":"ml-0.5 xs:ml-1 sm:ml-2"),"aria-label":h("common.close"),children:t.jsx(r,{className:"w-4 h-4 xs:w-4 xs:h-4 sm:w-5 sm:h-5 group-hover:rotate-90 transition-transform duration-300"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-2 xs:p-3 sm:p-4 space-y-2 xs:space-y-3 sm:space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent max-h-[calc(90vh-200px)] xs:max-h-[calc(85vh-200px)] sm:max-h-[calc(600px-200px)]",children:[f.map(e=>t.jsx("div",{className:"flex "+("user"===e.sender?g?"justify-start":"justify-end":g?"justify-end":"justify-start"),children:t.jsxs("div",{className:`\n                flex items-start gap-1.5 xs:gap-2 sm:gap-3 max-w-[95%] xs:max-w-[90%] sm:max-w-[85%]\n                ${e.sender,g?"flex-row-reverse":"flex-row"}\n              `,children:[t.jsx("div",{className:`\n                  w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center flex-shrink-0\n                  ${"user"===e.sender?"bg-inovara-primary text-white":"bg-gray-100 text-gray-600"}\n                `,children:"user"===e.sender?t.jsx(o,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4"}):t.jsx(a,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4"})}),t.jsxs("div",{className:"flex flex-col gap-1 xs:gap-1.5 sm:gap-2 min-w-0 flex-1",children:[t.jsxs("div",{className:`\n                    px-2.5 xs:px-3 sm:px-4 py-2 xs:py-2.5 sm:py-3 rounded-lg xs:rounded-xl sm:rounded-2xl text-xs xs:text-sm sm:text-sm shadow-sm border\n                    ${"user"===e.sender?"bg-gradient-to-r from-inovara-primary to-inovara-primary/90 text-white border-inovara-primary/20":"bg-white text-gray-800 border-gray-200"}\n                    break-words\n                  `,children:[t.jsx("p",{className:(g?"text-right":"text-left")+" leading-relaxed",children:e.text}),t.jsx("p",{className:`\n                      text-[10px] xs:text-xs mt-1 opacity-70\n                      ${g?"text-right":"text-left"}\n                    `,children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.suggestions&&e.suggestions.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 xs:gap-1.5 sm:gap-2 "+(g?"justify-end":"justify-start"),children:e.suggestions.map((e,s)=>t.jsx("button",{onClick:()=>{v(e),setTimeout(()=>E(),100)},className:`\n                            text-[10px] xs:text-xs px-2 xs:px-2.5 sm:px-3 py-1 xs:py-1.5 sm:py-2 bg-white hover:bg-inovara-primary/5 border border-gray-200 \n                            hover:border-inovara-primary/30 rounded-md xs:rounded-lg sm:rounded-xl transition-all duration-200 \n                            hover:shadow-sm cursor-pointer touch-manipulation active:scale-95 min-h-[32px] xs:min-h-[36px]\n                            ${g?"text-right":"text-left"}\n                            break-words\n                          `,children:e},s))}),e.actions&&e.actions.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 xs:gap-1.5 sm:gap-2 "+(g?"justify-end":"justify-start"),children:e.actions.map(e=>{const s=e.icon;return t.jsxs("button",{onClick:e.action,className:`\n                              flex items-center gap-1 xs:gap-1.5 sm:gap-2 px-2 xs:px-3 sm:px-4 py-1.5 xs:py-2 rounded-md xs:rounded-lg sm:rounded-xl text-[10px] xs:text-xs sm:text-sm font-medium\n                              transition-all duration-200 hover:scale-105 active:scale-95 touch-manipulation min-h-[32px] xs:min-h-[36px]\n                              ${"primary"===e.type?"bg-gradient-to-r from-inovara-primary to-inovara-secondary text-white hover:shadow-lg":"bg-white border border-gray-200 text-gray-700 hover:border-inovara-primary/30 hover:bg-inovara-primary/5"}\n                              ${g?"flex-row-reverse":"flex-row"}\n                            `,children:[s&&t.jsx(s,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"truncate",children:e.label})]},e.id)})})]})]})},e.id)),j&&t.jsx("div",{className:"flex "+(g?"justify-end":"justify-start"),children:t.jsxs("div",{className:"flex items-start gap-1.5 xs:gap-2 sm:gap-3 "+(g?"flex-row-reverse":"flex-row"),children:[t.jsx("div",{className:"w-6 h-6 xs:w-7 xs:h-7 sm:w-8 sm:h-8 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center flex-shrink-0",children:t.jsx(a,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4"})}),t.jsx("div",{className:"bg-white text-gray-800 px-2.5 xs:px-3 sm:px-4 py-2 xs:py-2.5 sm:py-3 rounded-lg xs:rounded-xl sm:rounded-2xl shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-1 xs:gap-1.5 sm:gap-2 "+(g?"flex-row-reverse":"flex-row"),children:[t.jsx(i,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4 animate-spin"}),t.jsx("span",{className:"text-[10px] xs:text-xs sm:text-sm "+(g?"text-right":"text-left"),children:h("chatbot.typing")})]})})]})}),t.jsx("div",{ref:Q})]}),1===f.length&&"welcome"===f[0]?.id&&t.jsxs("div",{className:"px-2 xs:px-3 sm:px-4 pb-1.5 xs:pb-2 shrink-0 bg-white/50 backdrop-blur-sm",children:[t.jsx("p",{className:"text-[10px] xs:text-xs sm:text-sm text-gray-600 mb-1.5 xs:mb-2 sm:mb-3 font-medium "+(g?"text-right":"text-left"),children:h("chatbot.quickQuestions.title")}),t.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 gap-1 xs:gap-1.5 sm:gap-2",children:L.map((e,s)=>t.jsx("button",{onClick:()=>(e=>{v(e),setTimeout(()=>E(),100)})(e),className:`text-[10px] xs:text-xs p-2 xs:p-2.5 sm:p-3 bg-white hover:bg-inovara-primary/5 border border-gray-200 hover:border-inovara-primary/30 rounded-md xs:rounded-lg sm:rounded-xl transition-all duration-200 hover:shadow-sm touch-manipulation active:scale-95 min-h-[32px] xs:min-h-[36px] ${g?"text-right":"text-left"} break-words`,children:e},s))})]}),t.jsx("div",{className:"p-2 xs:p-3 sm:p-4 border-t border-gray-200/50 bg-white/95 backdrop-blur-sm shadow-lg shrink-0 sticky bottom-0",children:t.jsxs("div",{className:"flex items-center gap-1.5 xs:gap-2 sm:gap-3 "+(g?"flex-row-reverse":"flex-row"),children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{ref:D,type:"text",value:y,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},placeholder:h("chatbot.inputPlaceholder"),className:`\n                  w-full px-2.5 xs:px-3 sm:px-4 py-2 xs:py-2.5 sm:py-3 border border-gray-200 rounded-md xs:rounded-lg sm:rounded-xl\n                  focus:outline-none focus:ring-2 xs:focus:ring-2 sm:focus:ring-4 focus:ring-inovara-primary/20 focus:border-inovara-primary\n                  text-xs xs:text-sm sm:text-sm placeholder-gray-500 bg-white/80 backdrop-blur-sm\n                  transition-all duration-200 hover:border-gray-300\n                  disabled:opacity-50 disabled:cursor-not-allowed\n                  ${g?"text-right":"text-left"}\n                  touch-manipulation min-h-[44px] xs:min-h-[48px]\n                `,dir:g?"rtl":"ltr",disabled:j,"aria-label":h("chatbot.inputPlaceholder"),"aria-describedby":"input-help",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),t.jsxs("div",{id:"input-help",className:"sr-only",children:[h("chatbot.inputPlaceholder"),". ",j?h("chatbot.typing"):""]})]}),t.jsxs("button",{onClick:E,disabled:!y.trim()||j,className:`\n                relative p-2 xs:p-2.5 sm:p-3 text-white rounded-md xs:rounded-lg sm:rounded-xl transition-all duration-300 \n                focus:outline-none focus:ring-2 xs:focus:ring-2 sm:focus:ring-4 focus:ring-inovara-primary/30\n                group overflow-hidden min-w-[44px] min-h-[44px] xs:min-w-[48px] xs:min-h-[48px] sm:min-w-[48px] sm:min-h-[48px] flex items-center justify-center\n                touch-manipulation\n                ${!y.trim()||j?"bg-gray-300 cursor-not-allowed":"bg-gradient-to-r from-inovara-primary to-inovara-secondary hover:from-inovara-primary/90 hover:to-inovara-secondary/90 hover:shadow-lg hover:scale-105 active:scale-95"}\n              `,"aria-label":h("chatbot.sendMessage"),"aria-disabled":!y.trim()||j,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-md xs:rounded-lg sm:rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsx(n,{className:"w-3.5 h-3.5 xs:w-4 xs:h-4 sm:w-5 sm:h-5 transition-transform duration-200 "+(!y.trim()||j?"":"group-hover:translate-x-0.5")}),j&&t.jsx(i,{className:"absolute w-3 h-3 xs:w-3.5 xs:h-3.5 sm:w-4 sm:h-4 animate-spin"}),t.jsx("div",{className:"absolute inset-0 rounded-md xs:rounded-lg sm:rounded-xl border border-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})})]})]}):null};export{x as default};
